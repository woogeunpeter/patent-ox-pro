<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>초기화 · Patent OX</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <main class="container card">
    <h2>초기화</h2>
    <p>아래 버튼을 누르면 캐시, 로컬 저장소, 숨김 문제 목록이 초기화됩니다.</p>
    <button id="reset" class="danger">완전 초기화</button>
    <p id="status" class="meta"></p>
    <p><a href="index.html" class="outline">메인으로 돌아가기</a></p>
  </main>
  <script>
  (async () => {
    const status = document.getElementById('status');
    async function clearSW() {
      if ('serviceWorker' in navigator) {
        const regs = await navigator.serviceWorker.getRegistrations();
        for (const r of regs) await r.unregister();
      }
    }
    async function clearCaches() {
      if (window.caches) {
        const names = await caches.keys();
        for (const n of names) await caches.delete(n);
      }
    }
    function clearLocal() {
      localStorage.removeItem("hiddenQuestionIds");
    }
    document.getElementById('reset').onclick = async () => {
      status.textContent = "초기화 중…";
      await clearSW();
      await clearCaches();
      clearLocal();
      status.textContent = "초기화 완료! 앱을 새로고침하세요.";
    };
  })();
  </script>
</body>
</html>
